=== YakutLogin ===
Contributors: yakut.ir
Donate link: https://yakut.ir/donate
Tags: sms login, otp login, mobile login, passwordless, webauthn, biometric login, google login, woocommerce login, sms registration, otp, recaptcha, turnstile, elementor login, persian, farsi, iran
Requires at least: 5.8
Tested up to: 6.5
Requires PHP: 7.4
Stable tag: 2.0.0
License: GPLv2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html

افزونه ورود و عضویت پیشرفته وردپرس با کد یکبارمصرف (پیامک و ایمیل)، ورود بدون رمز (اثرانگشت و چهره)، ورود با گوگل و ووکامرس.

== Description ==

**یاقوت لاگین** یک راهکار جامع و مدرن برای متحول کردن سیستم احراز هویت وب‌سایت وردپرسی شماست. این افزونه با ارائه قابلیت‌های امنیتی و کاربرپسند، تجربه ورود و عضویت کاربران را به سطح جدیدی ارتقا می‌دهد.

✨ **ویژگی‌های کلیدی:**

* **ورود و عضویت با کد یکبارمصرف (OTP):**
    * **ارسال پیامک (SMS):** با پشتیبانی از چندین درگاه پیامک محبوب ایرانی (کاوه‌نگار، ملی‌پیامک و...) و قابلیت **درگاه پشتیبان (Fallback)** برای اطمینان از ارسال موفق پیامک.
    * **ارسال ایمیل:** ارسال کد تایید به ایمیل کاربران به عنوان یک روش جایگزین یا اصلی.

* **ورود بدون رمز (Passwordless) با WebAuthn:**
    * به کاربران اجازه دهید با استفاده از روش‌های بیومتریک مانند **اثر انگشت** (در موبایل) یا **تشخیص چهره** (مانند Windows Hello) به سادگی و با امنیت بالا وارد حساب کاربری خود شوند.

* **ورود با گوگل (Google Login):**
    * یکپارچه‌سازی کامل با سیستم OAuth 2.0 گوگل برای ورود و ثبت‌نام سریع و آسان با یک کلیک.

* **حفاظت امنیتی با کپچا:**
    * فرم‌های خود را با پشتیبانی از **Google reCAPTCHA v2** و **Cloudflare Turnstile** در برابر ربات‌ها و اسپم‌ها ایمن کنید.

* **موتور پوسته‌بندی قدرتمند و داینامیک:**
    * با یک سیستم پوسته‌بندی پیشرفته، بی‌نهایت فرم با ظاهر و حتی ساختار HTML کاملاً متفاوت طراحی کنید. هر پوسته می‌تواند CSS، JS و تنظیمات المنتور اختصاصی خود را داشته باشد.

* **فرم‌های کاملاً قابل سفارشی‌سازی:**
    * **ویجت‌های المنتور:**
        * ویجت قدرتمند **فرم ورود** با ده‌ها گزینه برای سفارشی‌سازی کامل ظاهر و چیدمان.
        * ویجت جدید **دکمه ثبت دستگاه (WebAuthn)** برای قرار دادن دکمه ثبت اثر انگشت در هر جای سایت.
    * **شورت‌کد (Shortcode):** با استفاده از شورت‌کدهای `[slr_otp_form]` و `[yakut_webauthn_register_button]` فرم و دکمه‌ها را در هر قسمتی از سایت نمایش دهید.

* **یکپارچه‌سازی با ووکامرس:**
    * فرم ورود و ثبت‌نام پیش‌فرض ووکامرس در صفحه تسویه‌حساب را با سیستم ورود پیامکی یاقوت لاگین جایگزین کنید تا تجربه خریدی روان‌تر برای مشتریان خود فراهم آورید.

* **پنل تنظیمات مدرن و ایجکس:**
    * یک پنل مدیریت زیبا، سریع و کاملاً واکنش‌گرا که مدیریت تنظیمات افزونه را لذت‌بخش می‌کند.

یاقوت لاگین با تمرکز بر امنیت، انعطاف‌پذیری و تجربه کاربری، بهترین انتخاب برای مدیریت سیستم ورود و عضویت سایت شماست.


== Installation ==

1.  پوشه `YakutLogin` را در مسیر `/wp-content/plugins/` آپلود کنید.
    یا
    فایل فشرده (zip) افزونه را از طریق منوی 'افزونه‌ها' > 'افزودن' > 'بارگذاری افزونه' در پنل مدیریت وردپرس خود آپلود کنید.
2.  افزونه را از طریق صفحه 'افزونه‌ها' در وردپرس فعال نمایید.
3.  به منوی **"یاقوت لاگین"** در پیشخوان وردپرس بروید تا تنظیمات افزونه را پیکربندی کنید:
    * **تنظیمات عمومی:** فعال‌سازی ورود با ایمیل و ویرایش قالب ایمیل را انجام دهید.
    * **درگاه پیامک:** درگاه اصلی و پشتیبان خود را انتخاب کرده و اطلاعات API مربوطه را وارد کنید.
    * **ورود با گوگل:** کلیدهای Client ID و Client Secret خود را از کنسول گوگل دریافت و وارد کنید.
    * **تنظیمات کپچا:** سرویس کپچای مورد نظر خود را انتخاب و کلیدهای آن را وارد نمایید.
    * **ووکامرس:** یکپارچه‌سازی با صفحه تسویه‌حساب را فعال کنید.
    * **امکانات حرفه‌ای:** قابلیت ورود بدون رمز (WebAuthn) را فعال کنید.
4.  برای نمایش فرم، از شورت‌کد `[slr_otp_form]` یا ویجت **"فرم ورود و عضویت یاقوت"** در ویرایشگر المنتور استفاده کنید.
5.  برای نمایش دکمه ثبت دستگاه، از شورت‌کد `[yakut_webauthn_register_button]` یا ویجت **"دکمه ثبت دستگاه (WebAuthn)"** در صفحاتی که کاربر وارد شده است (مانند پروفایل کاربری) استفاده کنید.

== Frequently Asked Questions ==

= چگونه کلیدهای API برای درگاه پیامک را دریافت کنم؟ =

شما باید در وب‌سایت سرویس‌دهنده پیامک خود (مانند Kavenegar.com) یک حساب کاربری ایجاد کنید. پس از ورود به پنل کاربری، کلید API (و در صورت نیاز، شماره خط یا نام قالب) به شما داده می‌شود که باید آن را در بخش تنظیمات درگاه پیامک افزونه وارد کنید.

= چگونه ورود با گوگل را راه‌اندازی کنم؟ =

1.  به [کنسول ابری گوگل (Google Cloud Console)](https://console.cloud.google.com/) بروید.
2.  یک پروژه جدید بسازید یا یکی از پروژه‌های موجود را انتخاب کنید.
3.  به بخش "APIs & Services" > "Credentials" بروید.
4.  روی "Create Credentials" > "OAuth client ID" کلیک کرده و "Web application" را انتخاب کنید.
5.  در بخش "Authorized redirect URIs"، آدرسی که در تنظیمات "ورود با گوگل" افزونه نمایش داده شده است را وارد کنید (مثلا: `https://yourdomain.com/?slr_google_auth_callback=1`).
6.  "Client ID" و "Client Secret" تولید شده را کپی و در تنظیمات افزونه جای‌گذاری کنید.
7.  مطمئن شوید که "Google People API" برای پروژه شما در بخش "Library" فعال باشد.

= چگونه ورود بدون رمز (اثر انگشت) را برای حساب کاربری خودم فعال کنم؟ =

به منوی "یاقوت لاگین" > تب "امکانات حرفه‌ای" بروید. پس از فعال‌سازی این قابلیت، روی دکمه "ثبت این دستگاه" کلیک کرده و مراحل احراز هویت سیستم‌عامل خود (وارد کردن پین، اثر انگشت یا چهره) را دنبال کنید. از این پس می‌توانید در فرم ورود، با کلیک روی دکمه مربوطه بدون نیاز به کد وارد شوید.

= چگونه ظاهر فرم را سفارشی‌سازی کنم؟ =

* **ویجت المنتور:** بهترین روش برای سفارشی‌سازی است. شما به تمام تنظیمات استایل، رنگ، فونت، فاصله‌گذاری و چیدمان در تب‌های "محتوا" و "استایل" ویجت دسترسی دارید.
* **موتور پوسته‌بندی:** شما می‌توانید با ساختن پوشه‌های جدید در مسیر `public/themes` و تعریف فایل‌های `theme.json`, `theme.php`, `style.css` و `script.js`، پوسته‌های کاملاً اختصاصی با HTML و منطق متفاوت ایجاد کنید.
* **شورت‌کد:** شورت‌کد `[slr_otp_form]` پارامترهایی مانند `theme="dark"`، `layout="compact"` و `text_send_otp="ارسال کن"` را برای تغییرات سریع می‌پذیرد.
* **CSS سفارشی:** شما همیشه می‌توانید با استفاده از کلاس اصلی `.slr-otp-form-container`، استایل‌های CSS دلخواه خود را اضافه کنید.


== Screenshots ==

1.  نمای کلی پنل تنظیمات مدرن و زیبای افزونه.
2.  بخش تنظیمات درگاه پیامک با قابلیت انتخاب درگاه اصلی و پشتیبان.
3.  بخش تنظیمات ورود با گوگل و کپچا به صورت تفکیک شده.
4.  ویجت المنتور و گزینه‌های متنوع آن برای سفارشی‌سازی فرم.
5.  ویجت جدید المنتور برای دکمه ثبت دستگاه با قابلیت انتخاب آیکون SVG.
6.  نمونه‌ای از فرم ورود در سایت با یکی از پوسته‌های پیش‌فرض.
7.  صفحه ورود با دکمه "ورود با اثر انگشت" (WebAuthn).


== Changelog ==

= 2.0.0 =
* **بازطراحی ساختاری:** پیاده‌سازی **موتور پوسته‌بندی (Theme Engine)** داینامیک و شیءگرا برای انعطاف‌پذیری بی‌نهایت در طراحی فرم‌ها.
* **ویژگی جدید:** ویجت جدید المنتور برای **"دکمه ثبت دستگاه (WebAuthn)"** با قابلیت سفارشی‌سازی کامل.
* **بهبود:** کدنویسی سمت کاربر (JavaScript) برای پشتیبانی از چندین ویجت در یک صفحه بهینه شد.
* **بهبود:** رفع تمام خطاهای Deprecated و Fatal Error برای سازگاری کامل با PHP 8.2 و بالاتر.
* **بهبود:** اصلاحات ظاهری و عملکردی در پنل مدیریت بر اساس بازخورد.

= 1.9.1 =
* **بازطراحی کامل:** پنل تنظیمات به طور کامل با یک رابط کاربری مدرن، سریع و ایجکس بازنویسی شد.
* **ویژگی جدید:** ورود بدون رمز (Passwordless) با استفاده از **WebAuthn** (اثر انگشت، تشخیص چهره) اضافه شد.
* **ارتقا:** سیستم درگاه پیامک با قابلیت تعریف **درگاه پشتیبان (Fallback)** بهبود یافت.
* **بهبود:** ساختار کد به صورت ماژولار و با استفاده از بهترین الگوهای برنامه‌نویسی بازنویسی شد.

= 1.5.0 =
* **ارتقا:** پشتیبانی از چندین درگاه پیامک جدید ایرانی اضافه شد.
* **بهبود:** ترجمه فارسی افزونه کامل‌تر شد.

= 1.0.4 =
* **ارتقا:** یکپارچه‌سازی با صفحه تسویه‌حساب ووکامرس اضافه شد.
* **ارتقا:** کنترل‌های بیشتری به ویجت المنتور و پارامترهای جدیدی به شورت‌کد برای سفارشی‌سازی چیدمان اضافه شد.

= 1.0.0 =
* انتشار اولیه افزونه با قابلیت ورود و عضویت با OTP (ایمیل و پیامک).


== Upgrade Notice ==

= 2.0.0 =
این یک به‌روزرسانی بزرگ و ساختاری است! ما یک **موتور پوسته‌بندی** قدرتمند اضافه کرده‌ایم و ویجت جدیدی برای دکمه ثبت دستگاه ارائه داده‌ایم. این نسخه راه را برای امکانات هیجان‌انگیزتر در آینده هموار می‌کند.